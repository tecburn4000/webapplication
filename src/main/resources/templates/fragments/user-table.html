<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

  <div th:fragment="userTable(users, editLink, deleteLink)" class="container">
    <h1>Employee Directory</h1>
    <table>
      <thead>
      <tr>
        <th th:text="#{label.form.list.table.id}">id</th>
        <th th:text="#{label.form.list.table.firstname}">Vorname</th>
        <th th:text="#{label.form.list.table.lastname}">Nachname</th>
        <th th:text="#{label.form.list.table.username}">Username</th>
        <th th:text="#{label.form.list.table.email}">Email</th>
        <th th:text="#{label.form.list.table.action}">Email</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="user : ${users}">
        <td th:text="${user.id}">ID</td>
        <td th:text="${user.firstname}">Vorname</td>
        <td th:text="${user.lastname}">Nachname</td>
        <td th:text="${user.username}">Username</td>
        <td th:text="${user.email}">Email</td>
        <!-- Edit and delete only visible for ADMIN -->
        <td sec:authorize="hasRole('ADMIN')">
            <a th:href="@{${editLink}(id=${user.id})}" th:text="#{label.form.list.link.edit}">Edit</a>
            <a th:href="@{${deleteLink}(id=${user.id})}" th:text="#{label.form.list.link.delete}">Delete</a>
            <form th:action="@{${deleteLink}(id=${user.id})}"
                  method="post"
                  style="display:inline;"
                  onsubmit="return confirm('User wirklich lÃ¶schen?');">

                <input type="hidden" name="_method" value="delete"/>
                <button type="submit">Delete</button>
            </form>
            <form th:action="@{${editLink}(id=${user.id})}" method="get">
                <button type="submit">Edit</button>
            </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</body>
</html>